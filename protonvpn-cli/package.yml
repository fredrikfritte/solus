name       : protonvpn-cli
version    : 1.1.0
release    : 1
source     :
    -  https://github.com/ProtonVPN/protonvpn-cli/archive/v1.1.0.tar.gz : 1a8eb6b2ab8bc6327eca920ad86b452aeff9470d3205e3fe4dfcc7a799937811
license    : MIT
component  : network
summary    : ProtonVPN CLI tool for protonvpn.com
description: |
    ProtonVPN CLI tool for protonvpn.com
rundeps  :
    - dialog
    - openresolv
    - openvpn
    - procps-ng
setup      : |
    if ! test -f /etc/openvpn/update-resolv-conf; then
        mkdir -p "$workdir/openvpn-update-resolv-conf"

        git clone \
            https://github.com/masterkorp/openvpn-update-resolv-conf.git \
            "$workdir/openvpn-update-resolv-conf"

        _oldpath="$(pwd)"
        cd "$workdir/openvpn-update-resolv-conf"
        install -D -m655 update-resolv-conf.sh \
            "$installdir/etc/openvpn/update-resolv-conf"
        cd "${_oldpath}"
    fi
install    : |
    install -Dm755 ./protonvpn-cli.sh "$installdir/usr/bin/protonvpn-cli"
    ln -s "$installdir/usr/bin/protonvpn-cli" "$installdir/usr/bin/pvpn"
    install -Dm644 ./license.md "$installdir/usr/share/licenses/protonvpn-cli/LICENSE"
